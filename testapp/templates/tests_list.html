{% load humanize %}

<section class="page-section" id="products">
  <div class="container">
    {% for item in object_list %}
    <div class="row mb-5 align-items-center">

      <!-- 画像エリア -->
      <div class="col-md-6 text-center mb-4">
        {% if item.image1 %}
        <img src="{{ item.image1.url }}" class="img-fluid rounded shadow-sm mx-auto d-block" alt="{{ item.title }}">
        {% else %}
        <img src="https://via.placeholder.com/600x400?text=No+Image" class="img-fluid rounded shadow-sm mx-auto d-block" alt="No image">
        {% endif %}
      </div>

      <!-- 商品情報エリア -->
      <div class="col-md-6">
        <h3 class="fw-bold mb-4">{{ item.title|default:"商品名不明" }}</h3>

        <p class="text-muted mb-4">
          {{ item.comment|default:"商品の説明はありません。"|truncatechars:120 }}
        </p>

        <p class="fs-5 fw-semibold text-dark mb-4">
          {% if item.price %}
          ¥{{ item.price|intcomma }}
          {% else %}
          価格未定
          {% endif %}
        </p>

        <div class="mt-3">
          <a href="{% url 'testapp:item_detail' item.id %}" class="btn btn-outline-dark me-2">詳細を見る</a>
        </div>
      </div>

    </div>

    <hr class="my-5">
    {% empty %}
      <div class="text-center py-5">
        <p class="text-muted">まだ商品が登録されていません。</p>
      </div>
    {% endfor %}
  </div>
</section>
